# K-Food Export Passport AI 개발일지

**날짜**: 2026-01-16  
**문서 성격**: 고도화 방향 정리 (방향 고정 / 실행 기준)

---

## 1. 오늘의 결론 요약

본 프로젝트는 더 이상 “데모” 단계가 아니며,  
**공모전·학원 발표·포트폴리오 기준의 서비스 MVP 1차 완성 상태**에 도달했다.

- URL 접속 가능
- 결과 페이지 고유 URL 존재
- 분석 히스토리 저장 및 조회 가능

→ **‘서비스로 보이기 위한 최소 조건 충족’**

---

## 2. 현재까지 잘 된 점 (유지 사항)

### 2-1. 서비스 판단 기준 충족

| 항목               | 상태 |
| ------------------ | ---- |
| URL 기반 접속      | 완료 |
| 분석 결과 고유 URL | 완료 |
| 분석 히스토리      | 완료 |
| PDF 다운로드       | 완료 |

> 심사/발표 기준에서 “데모냐?” 질문에 방어 가능 상태

---

### 2-2. 기술 선택의 합리성 확보

- OCR: Google Vision + Tesseract 이중 엔진
- 규정 체크: 국가별 JSON 규칙 기반
- LLM: 홍보 문구 생성 용도로만 제한
- 과도한 모델 학습 없음 (2주 MVP 원칙 준수)

→ “왜 이 기술을 썼는가?”에 대한 설명이 모두 준비된 구조

---

### 2-3. 지정공모(K-푸드)와의 정합성

- 이미지 기반 수출 라벨 분석
- 규정 리스크 자동 점검
- 현지 홍보 콘텐츠 자동 생성

→ 농림축산식품부 K-푸드 지정공모 과제와 직접적으로 맞닿아 있음

---

## 3. 현재 안 된 것 / 약한 부분 (고도화 필요)

### 3-1. 규정 판단의 깊이 부족

**현재**

- 키워드 기반 누락/경고 탐지

**문제**

- 왜 위험한지에 대한 근거 설명 부족
- 규정 조항 번호/출처 노출 없음

**리스크**

- ‘판단’이 아닌 ‘알림 도구’로 인식될 가능성

---

### 3-2. OCR 신뢰도 설계 설명 부족

**현재**

- OCR 결과 출력은 가능

**부족한 점**

- OCR 실패/오인식에 대한 UX 가이드 없음
- 사람이 확인해야 할 포인트 시각화 부족

---

### 3-3. 확장성은 구조 증거가 부족함

**문서상**

- K-푸드 → K-뷰티 → K-펫푸드 확장 가능 명시

**현실**

- 현재는 식품 라벨에 특화된 구조로만 보일 수 있음
- 규정 JSON 스키마의 범용성 설명 부족

---

## 4. 고도화 방향성 (방향 변경 없음, 실행만)

> 원칙
>
> - 구조 변경 ❌
> - 기술 추가 ❌
> - 설명력과 신뢰도만 강화 ⭕

---

### 4-1. 규정 체크 결과에 ‘근거 정보’ 추가

**목표**

- 판단처럼 보이게 하지 않고,  
  **근거 있는 경고로 신뢰도 상승**

**예시 구조**

```json
{
  "risk": "Wheat allergen missing",
  "severity": "HIGH",
  "regulation": "FDA FALCPA",
  "article": "Section 403(w)",
  "reason": "Major allergen must be declared in plain English"
}
```

---

### 4-2. 실행 결과 (2026-01-16)

**결론: 목표 달성**

- `4-1`에서 정의한 ‘근거 정보 추가’ 작업 완료.

- `docs/2026-01-16_국가별_규정데이터_검증_지시서.md`에 따라 국가별 규정 데이터를 검증하고 `details` JSON을 재구성 완료.

- 이제 리포트에서 알레르기 경고 발생 시, 구체적인 규정 근거가 함께 표시되어 서비스의 신뢰도와 설명력이 향상됨.

**작업 내역**

1.  **데이터 구조 확장 및 검증 (`us_fda.json`, `jp_food_label.json`, `vn_food_label.json`)**:

    - 각 국가별 규정 파일의 `major_allergens` 항목에 `details` 객체를 추가하여 `regulation`, `article`, `reason`, `authority`, `as_of`, `note` 필드를 신설.

    - 미국 (`us_fda.json`): FALCPA, FASTER Act (2021) 등 최신 규제 반영, `Sesame` 알레르기 추가.

    - 일본 (`jp_food_label.json`): 식품표시법, 의무/권장 분류, 2023년 호두 추가 등 반영.

    - 베트남 (`vn_food_label.json`): Decree 43/2017/ND-CP, Circular 05/2019/TT-BYT 등 일반 라벨링 규정 및 알레르기 권장 사항 반영.

    - 각 필드의 내용은 `docs/2026-01-16_국가별_규정데이터_검증_지시서.md`의 엄격한 가이드라인을 준수하여 작성되었으며, 모호한 표현이나 추측을 배제함.

2.  **백엔드 로직 수정 (`checker.py`)**:

    - 규칙 파일의 `details` 정보를 읽어, API 응답의 `risks` 항목에 근거 정보를 동적으로 포함하도록 `check_risks` 함수를 수정.

3.  **프론트엔드 연동 (Full-stack)**:

    - **`types.ts`**: `ApiRiskItem` (백엔드 응답), `RegulationCheck` (UI 모델) 타입에 근거 정보 필드를 추가하여 데이터 전달 경로를 확보.

    - **`api.ts`**: API 서비스의 응답 변환 함수(`convertRisks`)가 새로운 근거 정보 필드를 프론트엔드 모델로 매핑하도록 수정.

    - **`ReportPage.tsx`**: 분석 리포트 페이지의 '수출 규정 검토 결과' 섹션을 재구성하여, 전달받은 근거 정보를 명확하고 구조화된 UI로 표시. (다크 모드 포함)

**향후 작업 (반복 데이터 입력 - Data Enrichment)**

- **대상**: `eu_food_label.json`, `cn_food_label.json`

- **내용**: 이미 구조가 검증된 `details` 객체(`regulation`, `article`, `reason`, `authority`, `as_of`, `note` 필드)를 해당 국가의 모든 알레르기 항목에 추가하는 Data Enrichment 작업.

- **방향**: 각 국가의 공식 규정 및 가이드라인을 철저히 조사하여, 모호하지 않고 근거가 명확한 `details` 내용을 채워 넣어 데이터의 깊이를 보강.

---

### 4-3. 2차 고도화 추가 결과 (2026-01-16)

**과제 A. 규정 근거의 “출처 레벨” 고도화**

- **결론**: `source_type` 및 `confidence_level` 필드 추가 완료.
- **내역**: `us_fda.json`, `jp_food_label.json`, `vn_food_label.json` 파일 내 모든 `major_allergens` `details` 객체에 `source_type` (official_law) 및 `confidence_level` (high) 필드를 추가 완료.

**과제 B. “설명 가능한 AI” 관점 보강**

- **결론**: 문서용 설명 문장 3종 생성 완료.
- **설명 문장**:
  1.  **규정 경고는 판단이 아니라 규칙 매칭 결과임**: "본 시스템의 규정 경고는 인공지능의 법적 판단이 아닌, 사전에 정의된 국가별 식품 라벨링 규칙과 OCR 추출 텍스트 간의 패턴 매칭 결과를 나타냅니다. 이는 법적 구속력을 가지지 않으며, 사용자에게 정보 제공을 목적으로 합니다."
  2.  **OCR 텍스트 중 어떤 정보가 규칙과 연결되었는지 설명 가능해야 함**: "각 경고는 OCR로 추출된 원본 텍스트 내에서 특정 키워드나 문구가 어떤 규정 항목과 일치하여 발생했는지를 명확히 제시합니다. 이를 통해 사용자는 경고의 근거를 시각적으로 확인하고 이해할 수 있습니다."
  3.  **AI 오판 가능성을 전제로 한 보조 도구 포지션 명확화**: "AI 분석 결과는 OCR 기술의 한계 및 규정 해석의 복잡성으로 인해 오판 가능성을 내포합니다. 따라서 본 시스템은 최종적인 판단을 위한 보조 도구로서 활용되어야 하며, 중요한 결정에 앞서 전문가의 검토를 권장합니다."

**과제 C. AI 책임 한계(disclaimer)의 구조화**

- **결론**: Disclaimer JSON 구조 및 표현 제안 완료.
- **Disclaimer JSON 구조 및 표현**:
  ```json
  {
    "disclaimer_type": "compliance_support",
    "text": "The analysis results provided by this system are for preliminary compliance review support and general informational purposes only. They do not constitute legal advice, regulatory endorsement, or a definitive statement of compliance. Users should consult with legal and regulatory professionals for official interpretation and ensure full compliance with all applicable laws and regulations. The system is intended as an aid and should not be solely relied upon for making critical business or legal decisions.",
    "applies_to": ["all_reports", "legal_compliance"],
    "authority_statement": "This disclaimer is aligned with the principle of providing AI as a supportive tool, not a decision-maker."
  }
  ```

**과제 D. 확장 가능성의 구조적 증명**

- **결론**: 화장품 산업 확장 예시 JSON 생성 완료.
- **화장품 산업 확장 예시 JSON**:
  ```json
  {
    "country": "EU",
    "industry": "cosmetics",
    "regulation": "Regulation (EC) No 1223/2009 on cosmetic products",
    "major_prohibitions": [
      {
        "name": "CMR Substances (Category 1A/1B)",
        "keywords": ["carcinogenic", "mutagenic", "reprotoxic", "CMR"],
        "details": {
          "regulation": "Regulation (EC) No 1223/2009 of the European Parliament and of the Council on cosmetic products",
          "article": "Article 15 & Annex II",
          "reason": "Substances classified as Carcinogenic, Mutagenic, or Reprotoxic (CMR) of category 1A or 1B are prohibited from use in cosmetic products.",
          "authority": "European Commission, SCCS (Scientific Committee on Consumer Safety)",
          "source_type": "official_law",
          "as_of": "2009 (with subsequent amendments)",
          "confidence_level": "high",
          "note": "Exceptions for certain CMR substances are possible under strict conditions, requiring specific assessment and authorization."
        }
      },
      {
        "name": "Certain Parabens (e.g., Isopropylparaben)",
        "keywords": ["paraben", "isopropylparaben", "isobutylparaben"],
        "details": {
          "regulation": "Regulation (EC) No 1223/2009 on cosmetic products (Annex V & Annex II)",
          "article": "Annex V (preservatives allowed), Annex II (prohibited substances)",
          "reason": "Some parabens are either restricted or prohibited due to potential endocrine disrupting properties. Isopropylparaben and Isobutylparaben are prohibited.",
          "authority": "European Commission, SCCS",
          "source_type": "official_law",
          "as_of": "2014 (reflecting amendments)",
          "confidence_level": "high",
          "note": "Other parabens (e.g., Methylparaben, Ethylparaben) are allowed under specified concentration limits."
        }
      }
    ]
  }
  ```
