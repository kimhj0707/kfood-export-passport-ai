# K-Food Export Passport AI - 기능 추가 계획

**작성일**: 2026-01-15
**상태**: Sprint 2 완료

---

## 현재 완성된 기능

| 카테고리 | 기능                 | 상태                              |
| -------- | -------------------- | --------------------------------- |
| OCR      | Google Vision OCR    | ✅ 완성                           |
| OCR      | Tesseract OCR        | ⚠️ 부분 구현                      |
| 분석     | 알레르기 추출 (13종) | ✅ 완성                           |
| 분석     | 영양성분 파싱 (9종)  | ✅ 완성                           |
| 분석     | 규정 체크 (US/JP/VN) | ✅ 완성                           |
| LLM      | 마케팅 문구 생성     | ✅ 완성                           |
| 리포트   | PDF 생성             | ✅ 완성                           |
| API      | CRUD 엔드포인트      | ✅ 완성                           |
| DB       | SQLite 저장          | ✅ 완성                           |
| UI       | 랜딩 페이지          | ✅ 완성                           |
| UI       | 분석 페이지          | ✅ 완성                           |
| UI       | 결과 페이지          | ✅ 완성                           |
| UI       | 히스토리 페이지      | ✅ 완성 (페이지네이션, 삭제 포함) |

---

## Sprint 1 (완료)

### 1. 히스토리 페이지네이션 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] `HistoryPage.tsx`에서 페이지 상태 관리
- [x] 이전/다음 버튼 클릭 시 offset 변경
- [x] `api.ts`의 `getHistory()`에 offset/limit 파라미터 추가
- [x] 페이지 번호 및 총 항목 수 표시

---

### 2. 이미지 미리보기 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] `AnalyzePage.tsx`에 이미지 미리보기 영역 추가
- [x] FileReader API로 업로드된 이미지 표시
- [x] 이미지 삭제/교체 버튼 추가 (X 버튼)
- [x] 이미지 크기 제한 (10MB) 및 검증

---

### 3. 리포트 삭제 버튼 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] `HistoryPage.tsx`에 삭제 버튼 추가
- [x] 삭제 확인 다이얼로그 (confirm)
- [x] 삭제 후 현재 페이지 새로고침
- [x] `api.ts`에 `deleteReport()` 함수 추가

---

## Sprint 2 (완료)

### 4. 에러 핸들링 강화 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] Toast 알림 시스템 구현 (ToastContext, Toast 컴포넌트)
- [x] 모든 alert를 Toast 메시지로 교체
- [x] 네트워크 오류 시 재시도 버튼 추가
- [x] 로딩 상태 개선 (스피너 애니메이션)

---

### 5. 분석 단계별 진행 표시 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] AnalysisProgress 모달 컴포넌트 구현
- [x] 5단계 진행 표시 (업로드 → OCR → 분석 → 규정 검토 → 마케팅)
- [x] 각 단계별 완료 체크 및 진행률 표시
- [x] 애니메이션 효과 적용

---

### 6. 분석 결과 공유 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] 공유 버튼 추가 (ReportPage)
- [x] 클립보드 복사 기능 (navigator.clipboard API)
- [x] 복사 완료 Toast 알림

---

### 7. 새 분석 기능 ✅

**완료일**: 2026-01-15

**구현 내용**:

- [x] ReportPage에서 "새 분석" 버튼 추가
- [x] 분석 페이지로 바로 이동 기능

---

## 향후 고도화 (Sprint 3+)

### 사용자 경험 개선

| 기능          | 설명               | 우선순위 |
| ------------- | ------------------ | -------- |
| 히스토리 필터 | 국가/날짜별 필터링 | 중       |
| 다크 모드     | 테마 전환          | 낮음     |
| 다국어 지원   | 영어/베트남어 UI   | 낮음     |
| 모바일 최적화 | 반응형 개선        | 중       |

### 기능 확장

| 기능            | 설명               | 우선순위 |
| --------------- | ------------------ | -------- |
| 일괄 분석       | 여러 이미지 한번에 | 중       |
| 국가 추가       | EU, CN 등          | 중       |
| OCR 정확도 향상 | 이미지 전처리      | 높음     |
| 규정 상세화     | FDA/MHLW 세부 규정 | 높음     |

### 인프라 개선

| 기능        | 설명            | 우선순위 |
| ----------- | --------------- | -------- |
| 사용자 인증 | 로그인/회원가입 | 중       |
| PostgreSQL  | DB 마이그레이션 | 낮음     |
| 캐싱        | API 응답 캐시   | 낮음     |
| 모니터링    | 로그/메트릭     | 낮음     |

---

## API 현황

### 구현 완료

| Method | Path                    | 설명          |
| ------ | ----------------------- | ------------- |
| GET    | `/`                     | 헬스체크      |
| POST   | `/api/analyze`          | 이미지 분석   |
| GET    | `/api/reports`          | 히스토리 목록 |
| GET    | `/api/reports/{id}`     | 리포트 상세   |
| GET    | `/api/reports/{id}/pdf` | PDF 다운로드  |
| DELETE | `/api/reports/{id}`     | 리포트 삭제   |

### 프론트엔드 연동 현황

| API                         | 프론트엔드  | 상태                          |
| --------------------------- | ----------- | ----------------------------- |
| POST `/api/analyze`         | AnalyzePage | ✅ 연동됨                     |
| GET `/api/reports`          | HistoryPage | ✅ 연동됨 (페이지네이션 포함) |
| GET `/api/reports/{id}`     | ReportPage  | ✅ 연동됨                     |
| GET `/api/reports/{id}/pdf` | ReportPage  | ✅ 연동됨                     |
| DELETE `/api/reports/{id}`  | HistoryPage | ✅ 연동됨                     |

---

## 참고 사항

### 백엔드 API 페이지네이션 파라미터

```
GET /api/reports?limit=10&offset=0
```

- `limit`: 한 페이지당 항목 수 (기본값: 10)
- `offset`: 건너뛸 항목 수 (기본값: 0)

### 프론트엔드 환경 변수

```env
VITE_API_BASE_URL=https://kfood-api-233469550454.asia-northeast3.run.app
```

---

## 변경 이력

| 날짜       | 내용                                                    |
| ---------- | ------------------------------------------------------- |
| 2026-01-15 | 최초 작성, Sprint 1 계획 수립                           |
| 2026-01-15 | Sprint 1 완료: 페이지네이션, 이미지 미리보기, 삭제 버튼 |
| 2026-01-15 | Sprint 2 완료: Toast 알림, 진행 표시, 공유, 새 분석     |
