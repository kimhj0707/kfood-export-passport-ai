# K-Food Export Passport AI

## Priority 4: 전문가 협업 도구(Expert-in-the-loop) 고도화 작업지시서

**작성일**: 2026-01-16  
**목표**:  
AI 단독 도구가 아닌,  
**수출 실무자 ↔ 전문가(관세사·컨설턴트)** 간 협업을 전제로 한  
“사전 검토 + 전달용 리포트” 서비스로 완성

---

## 0. 핵심 포지션 선언 (변경 금지)

> 본 서비스는  
> **전문가를 대체하지 않으며,  
> 전문가 검토 전 단계의 품질을 표준화**하는 도구다.

Priority 4는 이 문장을 **기능으로 증명**하는 단계다.

---

## 1. 과제 A (필수): “전문가 전달용 리포트” 모드 추가

### A-1. 문제 정의

현재 리포트는 사용자 중심이다.
→ 전문가에게 전달하기엔 설명 포인트가 분산돼 있다.

---

### A-2. 해결책

리포트에 **전문가 전달 전용 뷰(Expert View)** 를 추가한다.

#### UI 방식

- ReportPage 상단 버튼 추가:
  - `전문가에게 전달하기 (Expert View)`
- 클릭 시:
  - 요약 중심, 근거 중심 레이아웃으로 전환

---

### A-3. Expert View 구성 고정

1. **제품/분석 요약**

   - 국가
   - 분석 일시
   - OCR 엔진
   - 분석 목적: “수출 라벨 사전 검토”

2. **핵심 리스크 요약 (Top Risks)**

   - HIGH / MEDIUM만 표시
   - 각 항목:
     - 요약
     - confidence
     - 관련 규정

3. **전문가 확인 요청 항목**

   - “아래 항목에 대한 전문가 검토가 필요합니다”
   - 체크리스트 형태

4. **AI 판단 범위 고정 문구**
   - “AI는 규정 근거 기반의 확인 포인트만 제시합니다”

---

## 2. 과제 B (필수): “전문가 확인 체크리스트” 생성

### B-1. 목적

전문가에게

> “이걸 봐주세요”

가 아니라

> “이 부분만 봐주세요”

라고 전달 가능하게 하기 위함.

---

### B-2. 구현 방식

- 리스크 생성 시 `expert_check_required: true/false` 필드 추가
- 기준:
  - confidence < 0.7 → true
  - HIGH severity → true
- Expert View에서는 이 항목만 체크리스트로 노출

---

### B-3. 체크리스트 예시

```text
☐ 알레르겐 Wheat 표기 누락 여부 최종 확인
☐ 영양성분 표기 방식이 FDA 최신 가이드라인에 부합하는지 검토
☐ 제조사 정보 표기 형식 확인
3. 과제 C (필수): 전문가 공유용 링크 / PDF 고도화
C-1. 공유 링크 강화
기존 리포트 URL 유지

URL 파라미터:

?view=expert

전문가에게 전달 시 이 링크 사용

C-2. PDF 리포트 “Expert Version” 추가
PDF 상단 고정 문구:

text
코드 복사
[Expert Review Copy]

This report is generated for preliminary compliance review support.
Final determination must be made by a qualified expert.
PDF 내용:

Expert View와 동일한 구조

사용자 개인 정보 최소화

4. 과제 D (권장): 전문가 코멘트 영역 (읽기 전용)
D-1. 범위 제한
실시간 협업 ❌

로그인 기반 권한 ❌

D-2. 구현
전문가 코멘트 입력란:

텍스트 박스 1개

“전문가 의견(선택)”

저장은 로컬 또는 DB(선택)

PDF에 포함 가능

👉 “협업 가능성”을 보여주기 위한 기능
👉 실시간 협업 아님

5. 문구/표현 가이드 (중요)
다음 표현은 반드시 사용, 변형 금지:

“사전 검토”

“전문가 확인 필요”

“법적 자문이 아님”

“최종 판단은 전문가 몫”

금지 표현:

합격 / 통과 / 승인

법적 적합 / 위법

AI 판단 완료

6. 적용 파일 가이드
frontend/pages/ReportPage.tsx

frontend/components/ExpertView.tsx (신규)

backend/src/api/db.py (expert_check_required 저장)

backend/src/report/pdf_report.py

frontend/types.ts

7. 완료 기준 (Stop Rule)
Priority 4는 아래 조건을 만족하면 종료:

리포트를 그대로 전문가에게 전달해도 어색하지 않다

“이 서비스는 어디까지 해주나?” 질문에 명확히 답할 수 있다

AI 책임 범위가 UI/문구/구조로 고정되어 있다

8. 한 줄 결론 (내부 기준)
Priority 4의 성공 기준은
“전문가가 싫어하지 않을 서비스”다.
```
